
COLLECTION CLIENTS:


Main Diagram
db.createCollection('clients', {
  validator: {
    $jsonSchema: {
      bsonType: 'object',
      title: 'clients',
      required: ['_dni'],
      properties: {
        _dni: {
          bsonType: 'objectId'
        },
        nom: {
          bsonType: 'string'
        },
        cognoms: {
          bsonType: 'string'
        },
        direccio: {
          bsonType: 'object',
          title: 'direccio',
          required: ['clients', 'botigues'],
          properties: {
            carrer: {
              bsonType: 'string'
            },
            numero: {
              bsonType: 'string'
            },
            pis: {
              bsonType: 'string'
            },
            codi_postal: {
              bsonType: 'string'
            },
            localitat: {
              bsonType: 'object',
              title: 'localitats',
              required: ['id_localitat'],
              properties: {
                id_localitat: {
                  bsonType: 'objectId'
                },
                nom: {
                  bsonType: 'string'
                }
              }
            },
            provincia: {
              bsonType: 'object',
              title: 'provincies',
              required: ['id_provincia', 'clients'],
              properties: {
                id_provincia: {
                  bsonType: 'objectId'
                },
                nom: {
                  bsonType: 'string'
                },
                clients: {
                  bsonType: 'objectId'
                }
              }
            },
            clients: {
              bsonType: 'objectId'
            },
            botigues: {
              bsonType: 'objectId'
            }
          }
        },
        codi_postal: {
          bsonType: 'string'
        },
        telefon: {
          bsonType: 'string'
        },
        localitat: {
          bsonType: 'object',
          title: 'localitats',
          required: ['id_localitat'],
          properties: {
            id_localitat: {
              bsonType: 'objectId'
            },
            nom: {
              bsonType: 'string'
            }
          }
        },
        provincia: {
          bsonType: 'object',
          title: 'provincies',
          required: ['id_provincia', 'clients'],
          properties: {
            id_provincia: {
              bsonType: 'objectId'
            },
            nom: {
              bsonType: 'string'
            },
            clients: {
              bsonType: 'objectId'
            }
          }
        }
      }
    }
  }
});




COLLECTION BOTIGUES:


Main Diagram
db.createCollection('botigues', {
  validator: {
    $jsonSchema: {
      bsonType: 'object',
      title: 'botigues',
      properties: {
        direccio: {
          bsonType: 'object',
          title: 'direccio',
          required: ['clients', 'botigues'],
          properties: {
            carrer: {
              bsonType: 'string'
            },
            numero: {
              bsonType: 'string'
            },
            pis: {
              bsonType: 'string'
            },
            codi_postal: {
              bsonType: 'string'
            },
            localitat: {
              bsonType: 'object',
              title: 'localitats',
              required: ['id_localitat'],
              properties: {
                id_localitat: {
                  bsonType: 'objectId'
                },
                nom: {
                  bsonType: 'string'
                }
              }
            },
            provincia: {
              bsonType: 'object',
              title: 'provincies',
              required: ['id_provincia', 'clients'],
              properties: {
                id_provincia: {
                  bsonType: 'objectId'
                },
                nom: {
                  bsonType: 'string'
                },
                clients: {
                  bsonType: 'objectId'
                }
              }
            },
            clients: {
              bsonType: 'objectId'
            },
            botigues: {
              bsonType: 'objectId'
            }
          }
        }
      }
    }
  }
});

COLLECTION EMPLEATS:

db.createCollection('empleats', {
  validator: {
    $jsonSchema: {
      bsonType: 'object',
      title: 'empleats',
      required: ['_dni', 'botigues', 'comandes'],
      properties: {
        _dni: {
          bsonType: 'objectId'
        },
        nom: {
          bsonType: 'string'
        },
        cognoms: {
          bsonType: 'string'
        },
        telefon: {
          bsonType: 'string'
        },
        lloc_de_treball: {
          bsonType: 'object',
          title: 'lloc_de_treball',
          properties: {
            repartidor: {
              enum: 'si',
              'no'
            },
            cuiner: {
              enum: 'si',
              'no'
            }
          }
        },
        botigues: {
          bsonType: 'objectId'
        },
        comandes: {
          bsonType: 'objectId'
        }
      }
    }
  }
});

COLLECTION COMANDES:


Main Diagram
db.createCollection('comandes', {
  validator: {
    $jsonSchema: {
      bsonType: 'object',
      title: 'comandes',
      required: ['clients', 'botigues'],
      properties: {
        data_hora: {
          bsonType: 'date'
        },
        entrega: {
          bsonType: 'object',
          title: 'lloc_de_treball',
          properties: {
            repartidor: {
              enum: 'si',
              'no'
            },
            cuiner: {
              enum: 'si',
              'no'
            }
          }
        },
        quantitat_productes: {
          bsonType: 'object',
          title: 'productes',
          required: ['comandes'],
          properties: {
            pizza: {
              bsonType: 'array',
              items: {
                title: 'pizzes',
                properties: {
                  nom: {
                    bsonType: 'string'
                  },
                  descripcio: {
                    bsonType: 'string'
                  },
                  imatge: {
                    bsonType: 'binData'
                  },
                  preu: {
                    bsonType: 'double'
                  },
                  categoria_pizza: {
                    bsonType: 'array',
                    items: {
                      bsonType: 'string'
                    }
                  }
                }
              }
            },
            burguer: {
              bsonType: 'array',
              items: {
                title: 'burguers',
                properties: {
                  nom: {
                    bsonType: 'string'
                  },
                  descripcio: {
                    bsonType: 'string'
                  },
                  imatge: {
                    bsonType: 'binData'
                  },
                  preu: {
                    bsonType: 'double'
                  }
                }
              }
            },
            beguda: {
              bsonType: 'array',
              items: {
                title: 'begudes',
                properties: {
                  nom: {
                    bsonType: 'string'
                  },
                  descripcio: {
                    bsonType: 'string'
                  },
                  imatge: {
                    bsonType: 'binData'
                  },
                  preu: {
                    bsonType: 'double'
                  }
                }
              }
            },
            comandes: {
              bsonType: 'array',
              items: {
                bsonType: 'objectId'
              }
            }
          }
        },
        preu_total: {
          bsonType: 'double'
        },
        clients: {
          bsonType: 'objectId'
        },
        botigues: {
          bsonType: 'objectId'
        }
      }
    }
  }
});
